# Generated by gramex init 1.65.0 (don't delete this line)
# on 2020-12-02 by bhanu.k <bhanu.kamapantula@gramener.com>

variables:
  themes:
    - "default"
    - "bootswatch/cerulean"
    - "bootswatch/cosmo"
    - "bootswatch/cyborg"
    - "bootswatch/darkly"
    - "bootswatch/flatly"
    - "bootswatch/journal"
    - "bootswatch/litera"
    - "bootswatch/lumen"
    - "bootswatch/lux"
    - "bootswatch/materia"
    - "bootswatch/minty"
    - "bootswatch/pulse"
    - "bootswatch/sandstone"
    - "bootswatch/simplex"
    - "bootswatch/sketchy"
    - "bootswatch/slate"
    - "bootswatch/solar"
    - "bootswatch/spacelab"
    - "bootswatch/superhero"
    - "bootswatch/united"
    - "bootswatch/yeti"
    - "themes-guide/blue_voltage"
    - "themes-guide/boldstrap"
    - "themes-guide/bootstrap_purple"
    - "themes-guide/darkster"
    - "themes-guide/fresca"
    - "themes-guide/greyson"
    - "themes-guide/hello_kiddie"
    - "themes-guide/herbie"
    - "themes-guide/hootstrap"
    - "themes-guide/lovey"
    - "themes-guide/monotony"
    - "themes-guide/poypull"
    - "themes-guide/signal"
    - "themes-guide/tequila"

# Configurations for app: access-violations
# ----------------------------------------------------------------------------
url:
  access-violations-home:
    pattern: /$YAMLURL/
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/index.html
      # See https://learn.gramener.com/guide/auth/#authorization for auth rules
      auth:
        login_url: /$YAMLURL/login/
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}

  access-violations-violations:
    pattern: /$YAMLURL/violations
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/violations.html
      # See https://learn.gramener.com/guide/auth/#authorization for auth rules
      auth:
        login_url: /$YAMLURL/login/
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}
  access-violations-login:
    pattern: /$YAMLURL/login/
    # You MUST change the auth before deploying. DBAuth is commonly used.
    # See https://learn.gramener.com/guide/auth/#database-auth
    handler: SimpleAuth
    kwargs:
      template: $YAMLPATH/login.html
      credentials:
        alpha: alpha
        beta: beta

  access-violations/csv_endpoint_:
    pattern: /$YAMLURL/data
    handler: FormHandler
    kwargs:
      # prepare: project_app.prepare_args
      url: $YAMLPATH/assets/data/IAM - Dummy Data.csv
      #auth: &HEADERS

  ui-templates:
    pattern: /$YAMLURL/gen
    handler: FileHandler
    kwargs:
      # path: $YAMLPATH/gen.html
      path: $YAMLPATH/t.html
      template: true

  ui-templates/templates/1:
    pattern: /$YAMLURL/t1
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/t1.html
      template: true

  ui-templates/templates/2:
    pattern: /$YAMLURL/t2
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/t2.html
      template: true

  access-violations-logout:
    pattern: /$YAMLURL/logout/
    handler: LogoutHandler

# Notify testers what user ID and password to use
test:
  auth:
    user: alpha
    password: alpha


# Gramex init configurations for app: access-violations
# ----------------------------------------------------------------------------
import:
  # To secure application for production,
  # replace 'YOUR-PROD-SERVER-NAME' with your production server host name.
  deploy if socket.gethostname() in {'YOUR-PROD-SERVER-NAME'}: $GRAMEXPATH/deploy.yaml
  # For alternate methods, see https://learn.gramener.com/guide/config/#conditions

  # /ui/ has Gramex UI components -- use this like the node_modules/ directory
  ui:
    path: $GRAMEXAPPS/ui/gramex.yaml
    YAMLURL: $YAMLURL/ui/
    namespace: [url]

  # /admin/ as an admin page to manage users, get system info, etc.
  admin:
    path: $GRAMEXAPPS/admin2/gramex.yaml    # Note the "admin2" instead of "admin"
    YAMLURL: /$YAMLURL/admin/               # URL to show the admin page at
    ADMIN_KWARGS:
      logo: https://gramener.com/uistatic/gramener.png
      home: /$YAMLURL/
      title: Admin
      theme: '?body-bg=white&navbar-dark-color=rgba(255%2C255%2C255%2C.8)&navbar-dark-hover-color=white'
      # authhandler: name-of-DBAuth-handler    -- required for user management
    ADMIN_AUTH:
      membership:
        hd: gramener.com                    # Only @gramener.com Google Auth are admins


handlers:
  BaseHandler:
    # Custom error pages for this application
    error:
      400: {path: $YAMLPATH/error/400.html}     # Bad request: e.g. URL argument missing
      401: {path: $YAMLPATH/error/401.html}     # Unauthorized: User not logged in
      403: {path: $YAMLPATH/error/403.html}     # Forbidden: user does not have access
      404: {path: $YAMLPATH/error/404.html}     # File not found
      500: {path: $YAMLPATH/error/500.html}     # Internal server error
